---
format: gfm
---

```{r}
library(epiworldR)
library(data.table)
```

## Data preparation

Setting up an empty model for the moment, we will be using the data from the davis county:

```{r}
#| label: loading-data
davis_pop <- fread("data/davis_population.csv")
davis_pop
```

Looking into the data

```{r}
plot(
  davis_pop$agepops,
  x = davis_pop$agelims,
  xlab = "Age groups",
  ylab = "Population counts",
  main = "Davis County Population by Age Groups"
)

N <- sum(davis_pop$agepops)
```

The mixing matrix looks like this (we are assuming uniform for the moment):

```{r}
davis_mixing_matrix <- readRDS("data/davis_mixing_matrix.rds")
image(
  davis_mixing_matrix,
  xlab = "Age groups",
  ylab = "Age groups",
  main = "Davis County Mixing Matrix"
)
```



## Model creating

Se will be assuming two values

- Incubation period is 2 to 5 days.
- Basic reproductive number will be between 1.5 and 3.

```{r}
#| label: creating-model
ModelSEIRMixingQuarantine(
  name       = "Davis county",
  n          = N
  prevalence = 1/N,
  contact_rate = 
  transmission_rate = 0.2,
  incubation_days = 3.5,
  recovery_rate = 7,
  contact_matrix = davis_mixing_matrix,
  hospitalization_rate = 0.05,
  hospitalization_period = 10,
  days_undetected = 2, 
  quarantine_period = 14,
  quarantine_willingness = 1.0,
  isolation_willingness = 1.0,
  isolation_period = 7,
  contact_tracing_success_rate = 0.8,
  contact_tracing_days_prior = 7
)

```